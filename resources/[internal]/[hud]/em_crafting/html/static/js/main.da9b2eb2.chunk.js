(this.webpackJsonpem_crafting=this.webpackJsonpem_crafting||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(11),i=n.n(c),s=(n(20),n(2)),o=n(3),l=n(5),u=n(4),p=(n(21),n(0)),d=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"change_title",value:function(e){this.setState({title:e})}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"crafting-title-container",children:[Object(p.jsx)("img",{src:"data:image/png;base64,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",className:"crafting-cog",alt:"cog"}),Object(p.jsx)("h1",{className:"crafting-title",children:this.props.title})]})}}]),n}(r.a.Component),j=n(8),h=n.n(j),m=n(9),f=n(6),b=n(12),A=(n(24),n(10),n(31)),y={1:"Food",2:"Electronics"};function v(e,t){var n=t.filter((function(t){return t.item_id==e})).map((function(e){return e.amount}));return 0==n.length?0:n.reduce((function(e,t){return e+t}))}function O(e,t){for(var n=e.inputs.map((function(e){return{itemid:e.itemid,amount:e.amount}})),a=1e9,r=0;r<n.length;r++){var c=v(n[r].itemid,t),i=Math.floor(c/n[r].amount);i<a&&(a=i)}return a}function g(e,t,n){return O(t,n)>=e}function x(e,t){return _.apply(this,arguments)}function _(){return(_=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).craft_x=function(e){if(!g(e,a.props.recipe,a.props.inventory))return!1;var t=Number(e);return!isNaN(t)&&(x("http://em_crafting/craft",{amount:t,recipe:a.props.recipe}),!0)},a.craft_request=function(e){a.props.no_modal(),a.craft_x(e)||x("http://em_crafting/notify",{message:"You do not have enough components to craft ".concat(e,"x ").concat(a.props.recipe.recipe_name),style:"error"})},a.handle_amount_change=function(e){a.setState({amount_value:e.target.value})},a.state={display_craft_x:!1,can_craft_1:g(1,a.props.recipe,a.props.inventory),can_craft_5:g(5,a.props.recipe,a.props.inventory),amount_value:0},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.state.can_craft_1?"button modal_buttons is-primary":"button modal_buttons is-light",n=this.state.can_craft_5?"button modal_buttons is-primary":"button modal_buttons is-light";return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"modal is-active",children:[Object(p.jsx)("div",{className:"modal-background"}),Object(p.jsxs)("div",{className:"modal-card",children:[Object(p.jsxs)("header",{className:"modal-card-head",children:[Object(p.jsxs)("p",{className:"modal-card-title",children:["Making ",this.props.recipe.recipe_name]}),Object(p.jsx)("button",{className:"delete","aria-label":"close",onClick:this.props.no_modal})]}),Object(p.jsxs)("div",{class:"modal-card-body",children:[this.props.recipe.inputs.map((function(e){return Object(p.jsxs)("p",{children:[Object(p.jsx)("b",{children:"Required: "})," ",e.amount,"x ",e.itemname," "]})})),Object(p.jsxs)("p",{children:["Able to craft ",O(this.props.recipe,this.props.inventory)]}),this.state.display_craft_x?Object(p.jsxs)(p.Fragment,{children:[" ",Object(p.jsx)("input",{class:"input",type:"text",value:this.state.amount_value,onChange:this.handle_amount_change,placeholder:"Craft X"})," "]}):null,Object(p.jsx)("button",{className:t,onClick:function(){e.craft_request(1)},children:"Craft 1"}),Object(p.jsx)("button",{className:n,onClick:function(){e.craft_request(5)},children:"Craft 5"}),Object(p.jsx)("button",{className:t,onClick:function(){return e.state.display_craft_x?e.craft_request(e.state.amount_value):e.setState({display_craft_x:!0})},children:"Craft X"})]})]})]})})}}]),n}(r.a.Component),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={display_modal:!1},e.show_modal=function(){e.setState({display_modal:!0})},e.no_modal=function(){e.setState({display_modal:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e="/img/items/"+this.props.recipe.recipe_name.replace(" ","_").toLowerCase()+".png";return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"column is-1",onClick:this.show_modal,onMouseEnter:this.props.mouse_enter,onMouseLeave:this.props.mouse_exit,ref:this.props.reference_element,children:Object(p.jsx)("center",{children:Object(p.jsx)("img",{src:e,style:{width:"64px",height:"64px"},alt:this.props.recipe.recipe_name})})}),this.state.display_modal?Object(p.jsx)(N,{no_modal:this.no_modal,recipe:this.props.recipe,inventory:this.props.inventory}):null]})}}]),n}(r.a.Component);function E(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),s=Object(f.a)(i,2),o=s[0],l=s[1],u=Object(a.useState)(null),d=Object(f.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)(null),y=Object(f.a)(b,2),O=y[0],g=y[1],x=Object(A.a)(o,j,{modifiers:[{name:"arrow",options:{element:O}}]}),_=x.styles,N=x.attributes,E=Object(p.jsxs)("div",Object(m.a)(Object(m.a)({ref:h,style:_.popper},N.popper),{},{className:"tooltip",children:[Object(p.jsx)("b",{children:"Item name:"})," ",e.recipe.recipe_name,e.recipe.inputs.map((function(t){return Object(p.jsxs)("p",{children:[Object(p.jsx)("b",{children:"Required: "})," ",t.amount,"x ",t.itemname," (",v(t.itemid,e.inventory),") "]})})),Object(p.jsx)("div",{ref:g,style:_.arrow})]}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(C,{recipe:e.recipe,inventory:e.inventory,reference_element:l,mouse_enter:function(){return c(!0)},mouse_exit:function(){return c(!1)}}),r?E:null]})}var S=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={display_grid:!1},e}return Object(o.a)(n,[{key:"render",value:function(){for(var e=[],t=0;t<this.props.recipes.length;t++)e.push(Object(p.jsx)(E,{recipe:this.props.recipes[t],inventory:this.props.inventory}));for(var n=[],a=Math.ceil(e.length/8),r=0;r<a;r++)8*r+8>e.length?n.push(Object(p.jsx)("div",{className:"columns",children:e.slice(8*r,e.length)})):n.push(Object(p.jsx)("div",{className:"columns",children:e.slice(8*r,8*r+8)}));return n}}]),n}(r.a.Component),B=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=[],n=function(n){e.props.recipes.some((function(e){return e.crafting_category_id==n}))&&(t.push(Object(p.jsx)("h1",{className:"crafting-titles",children:y[n]})),t.push(Object(p.jsx)(S,{recipes:e.props.recipes.filter((function(e){return e.crafting_category_id==n})),inventory:e.props.inventory})))};for(var a in y)n(a);return t}}]),n}(r.a.Component),M=(n(25),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={display:!1,inventory:[],recipes:[],title:"Placeholder"},a}return Object(o.a)(n,[{key:"event_listener_event",value:function(e,t){null!=t.data.display&&e.setState({display:t.data.display}),null!=t.data.recipes&&(e.setState({recipes:t.data.recipes}),e.setState({inventory:t.data.inventory}),e.setState({title:t.data.title}))}},{key:"key_up_handler",value:function(e,t){if("Escape"==t.code){var n=new XMLHttpRequest;n.open("POST","http://em_crafting/close"),n.setRequestHeader("Content-type","application/json"),n.send(),n.onload=function(){e.setState({display:!1})},n.onerror=function(){},n.ontimeout=function(){}}}},{key:"componentDidMount",value:function(){var e=this.event_listener_event,t=this.key_up_handler,n=this;window.addEventListener("message",(function(t){e(n,t)})),document.addEventListener("keyup",(function(e){t(n,e)}))}},{key:"render",value:function(){var e=this.state.display?"crafting-app-container":"crafting-app-container-hidden";return Object(p.jsxs)("div",{className:e,children:[Object(p.jsx)(d,{title:this.state.title}),Object(p.jsx)(B,{recipes:this.state.recipes,inventory:this.state.inventory})]})}}]),n}(r.a.Component)),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(M,{})}),document.getElementById("root")),w()}},[[26,1,2]]]);
//# sourceMappingURL=main.da9b2eb2.chunk.js.map