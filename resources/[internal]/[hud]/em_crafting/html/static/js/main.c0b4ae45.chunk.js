(this.webpackJsonpem_crafting=this.webpackJsonpem_crafting||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(10),c=n.n(r),s=(n(18),n(2)),o=n(3),l=n(5),u=n(4),p=(n(19),n(0)),d=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={title:e.title},a}return Object(o.a)(n,[{key:"change_title",value:function(e){this.setState({title:e})}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"crafting-title-container",children:[Object(p.jsx)("img",{src:"data:image/png;base64,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",className:"crafting-cog",alt:"cog"}),Object(p.jsx)("h1",{className:"crafting-title",children:this.props.title})]})}}]),n}(i.a.Component),j=n(8),h=n(6),m=(n(21),n(9),n(28)),b={1:"Food",2:"Electronics"};function f(e,t){var n=t.filter((function(t){return t.item_id==e})).map((function(e){return e.amount}));return 0==n.length?0:n.reduce((function(e,t){return e+t}))}function A(e,t){for(var n=e.inputs.map((function(e){return{itemid:e.itemid,amount:e.amount}})),a=0,i=0;i<n.length;i++){var r=f(n[i].itemid,t),c=Math.floor(r/n[i].amount);(c<a||0==a)&&(a=c)}return a}function v(e,t,n){return A(t,n)>=e}var y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).craft_x=function(e){v(e,a.props.recipe,a.props.inventory)},a.handle_amount_change=function(e){a.setState({amount_value:e.target.value})},a.state={display_craft_x:!1,can_craft_1:v(1,a.props.recipe,a.props.inventory),can_craft_5:v(1,a.props.recipe,a.props.inventory),amount_value:0},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.state.can_craft_1?"button modal_buttons is-primary":"button modal_buttons is-light",n=this.state.can_craft_5?"button modal_buttons is-primary":"button modal_buttons is-light";return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"modal is-active",children:[Object(p.jsx)("div",{className:"modal-background"}),Object(p.jsxs)("div",{className:"modal-card",children:[Object(p.jsxs)("header",{className:"modal-card-head",children:[Object(p.jsxs)("p",{className:"modal-card-title",children:["Making ",this.props.recipe.recipe_name]}),Object(p.jsx)("button",{className:"delete","aria-label":"close",onClick:this.props.no_modal})]}),Object(p.jsxs)("div",{class:"modal-card-body",children:[this.props.recipe.inputs.map((function(e){return Object(p.jsxs)("p",{children:[Object(p.jsx)("b",{children:"Required: "})," ",e.amount,"x ",e.itemname," "]})})),Object(p.jsxs)("p",{children:["Able to craft ",A(this.props.recipe,this.props.inventory)]}),this.state.display_craft_x?Object(p.jsxs)(p.Fragment,{children:[" ",Object(p.jsx)("input",{class:"input",type:"text",value:this.state.amount_value,onChange:this.handle_amount_change,placeholder:"Craft X"})," "]}):null,Object(p.jsx)("button",{className:t,onClick:function(){return e.craft_x(1)},children:"Craft 1"}),Object(p.jsx)("button",{className:n,onClick:function(){return e.craft_x(1)},children:"Craft 5"}),Object(p.jsx)("button",{className:t,onClick:function(){return e.state.display_craft_x?e.craft_x(e.state.amount_value):e.setState({display_craft_x:!0})},children:"Craft X"})]})]})]})})}}]),n}(i.a.Component),O=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={display_modal:!1},e.show_modal=function(){e.setState({display_modal:!0})},e.no_modal=function(){e.setState({display_modal:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e="/img/items/"+this.props.recipe.recipe_name.replace(" ","_").toLowerCase()+".png";return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"column is-1",onClick:this.show_modal,onMouseEnter:this.props.mouse_enter,onMouseLeave:this.props.mouse_exit,ref:this.props.reference_element,children:Object(p.jsx)("center",{children:Object(p.jsx)("img",{src:e,style:{width:"64px",height:"64px"},alt:this.props.recipe.recipe_name})})}),this.state.display_modal?Object(p.jsx)(y,{no_modal:this.no_modal,recipe:this.props.recipe,inventory:this.props.inventory}):null]})}}]),n}(i.a.Component);function g(e){var t=Object(a.useState)(!1),n=Object(h.a)(t,2),i=n[0],r=n[1],c=Object(a.useState)(null),s=Object(h.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)(null),d=Object(h.a)(u,2),b=d[0],A=d[1],v=Object(a.useState)(null),y=Object(h.a)(v,2),g=y[0],x=y[1],_=Object(m.a)(o,b,{modifiers:[{name:"arrow",options:{element:g}}]}),E=_.styles,C=_.attributes,B=Object(p.jsxs)("div",Object(j.a)(Object(j.a)({ref:A,style:E.popper},C.popper),{},{className:"tooltip",children:[Object(p.jsx)("b",{children:"Item name:"})," ",e.recipe.recipe_name,e.recipe.inputs.map((function(t){return Object(p.jsxs)("p",{children:[Object(p.jsx)("b",{children:"Required: "})," ",t.amount,"x ",t.itemname," (",f(t.itemid,e.inventory),") "]})})),Object(p.jsx)("div",{ref:x,style:E.arrow})]}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(O,{recipe:e.recipe,inventory:e.inventory,reference_element:l,mouse_enter:function(){return r(!0)},mouse_exit:function(){return r(!1)}}),i?B:null]})}var x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={display_grid:!1},e}return Object(o.a)(n,[{key:"render",value:function(){for(var e=[],t=0;t<this.props.recipes.length;t++)e.push(Object(p.jsx)(g,{recipe:this.props.recipes[t],inventory:this.props.inventory}));for(var n=[],a=Math.ceil(e.length/8),i=0;i<a;i++)8*i+8>e.length?n.push(Object(p.jsx)("div",{className:"columns",children:e.slice(8*i,e.length)})):n.push(Object(p.jsx)("div",{className:"columns",children:e.slice(8*i,8*i+8)}));return n}}]),n}(i.a.Component),_=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=[],n=function(n){e.props.recipes.some((function(e){return e.crafting_category_id==n}))&&(t.push(Object(p.jsx)("h1",{className:"crafting-titles",children:b[n]})),t.push(Object(p.jsx)(x,{recipes:e.props.recipes.filter((function(e){return e.crafting_category_id==n})),inventory:e.props.inventory})))};for(var a in b)n(a);return t}}]),n}(i.a.Component),E=(n(22),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={display:!1,inventory:[],recipes:[],title:"Placeholder"},a}return Object(o.a)(n,[{key:"event_listener_event",value:function(e,t){null!=t.data.display&&e.setState({display:t.data.display}),null!=t.data.recipes&&(e.setState({recipes:t.data.recipes}),e.setState({inventory:t.data.inventory}),e.setState({title:t.data.title}))}},{key:"key_up_handler",value:function(e,t){if("Escape"==t.code){var n=new XMLHttpRequest;n.open("POST","http://em_crafting/close"),n.setRequestHeader("Content-type","application/json"),n.send(),n.onload=function(){e.setState({display:!1})},n.onerror=function(){},n.ontimeout=function(){}}}},{key:"componentDidMount",value:function(){var e=this.event_listener_event,t=this.key_up_handler,n=this;window.addEventListener("message",(function(t){e(n,t)})),document.addEventListener("keyup",(function(e){t(n,e)}))}},{key:"render",value:function(){var e=this.state.display?"crafting-app-container":"crafting-app-container-hidden";return Object(p.jsxs)("div",{className:e,children:[Object(p.jsx)(d,{title:this.state.title}),Object(p.jsx)(_,{recipes:this.state.recipes,inventory:this.state.inventory})]})}}]),n}(i.a.Component)),C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))};c.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(E,{})}),document.getElementById("root")),C()}},[[23,1,2]]]);
//# sourceMappingURL=main.c0b4ae45.chunk.js.map